function FooplotSVGRecorder(){this.width=null,this.height=null,this.font="",this.textAlign="",this.svgHeader="",this.svgBody="",this.svgFooter="",this.lineWidth=1,this.strokeStyle="#000000",this.fillStyle="#ffffff",this.x=0,this.y=0,this.path_d="",this.moveToX=null,this.moveToY=null,this.clear=function(){this.svgBody=""},this.fillText=function(t,i,s){var e="start";"center"===this.textAlign&&(e="middle"),"right"===this.textAlign&&(e="end"),this.svgBody+='<text x="'+i+'" y="'+s+'" text-anchor="'+e+'" style="font:'+this.font+";stroke:none;fill:"+this.fillStyle+'">'+t+"</text>"},this.beginPath=function(){this.path_d=""},this.moveTo=function(t,i){isNaN(t)||isNaN(i)||(this.moveToX=t.toFixed(2),this.moveToY=i.toFixed(2))},this.lineTo=function(t,i){this.moveToX&&(this.path_d+="M"+this.moveToX+" "+this.moveToY+" ",this.moveToX=null,this.moveToY=null),this.path_d+="L"+t.toFixed(2)+" "+i.toFixed(2)+" "},this.stroke=function(){this.svgBody+='<path d="'+this.path_d+'" style="fill:none;stroke:'+this.strokeStyle+";stroke-width:"+this.lineWidth+';" />',this.path_d=""},this.fillRect=function(t,i,s,e){this.svgBody+='<rect x="'+t.toFixed(2)+'" y="'+i.toFixed(2)+'" width="'+s.toFixed(2)+'" height="'+e.toFixed(2)+'" style="fill:'+this.fillStyle+';stroke:none;" />'},this.getSVG=function(){var t="";return t+='<?xml version="1.0" standalone="no"?>',t+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',t+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+this.width+" "+this.height+'" version="1.1">',t+='<clipPath id="box"><rect x="0" y="0" width="'+this.width+'" height="'+this.height+'" style="fill:none;stroke:none;" /></clipPath>',t+='<g clip-path="url(#box)">',t+=this.svgBody,t+="</g></svg>"}}function Fooplot(container,options){FOOPLOT_INSTANCES.push(this),this.container=container,this.container.style.overflow="hidden",this.container.style.position="relative",this.container.style.webkitUserSelect="none",this.container.style.MozUserSelect="none",this.container.style.userSelect="none",FOOPLOT_MSIE&&(this.container.unselectable=!0),this.container.style.cursor="move",this.cover=document.createElement("div"),this.cover.style.position="absolute",this.cover.style.width="100%",this.cover.style.height="100%",this.container.style.webkitUserSelect="none",this.container.style.MozUserSelect="none",FOOPLOT_MSIE&&(this.cover.unselectable=!0),this.cover.style.zIndex=100,this.cover.style.background="#ffffff",this.cover.style.filter="alpha(opacity=0)",this.cover.style.opacity=0,this.container.appendChild(this.cover),this.subcontainer=document.createElement("div"),this.subcontainer.style.position="absolute",this.subcontainer.style.zIndex="1",this.subcontainer.style.webkitUserSelect="none",this.subcontainer.style.userSelect="none",FOOPLOT_MSIE&&(this.subcontainer.unselectable=!0),this.container.appendChild(this.subcontainer),this.recorder=new FooplotSVGRecorder,this.toolcontainer=document.createElement("div"),this.toolcontainer.style.position="absolute",this.toolcontainer.style.top="100%",this.toolcontainer.style.zIndex="200",this.toolcontainer.style.opacity=.7,this.toolcontainer.style.marginTop="-60px",this.toolcontainer.style.marginLeft="10px",this.toolcontainer.style.padding="10px",this.toolcontainer.style.height="32px",this.toolcontainer.style.webkitBorderRadius="5px",this.toolcontainer.style.visibility="hidden",this.container.appendChild(this.toolcontainer),this.addToolSeparator=function(){var t=document.createElement("div");t.style.display="inline",t.style.width="32px",t.style.height="1px",t.style.border="0px",t.style.padding="0px",t.style.marginRight="15px",this.toolcontainer.appendChild(t)},this.addToolButton=function(t,s,e,o){var n=document.createElement("button");return n.className="fooplot-tool",n.style.width="32px",o&&(n.title=o),n.style.background=t,n.style.position="relative",n.style.height="32px",n.style.border="0px",n.style.padding="0px",n.style.marginRight="15px",n.style.cursor="pointer",e?(n.onclick=function(){for(i in FOOPLOT_INSTANCES)if(this.parentNode===FOOPLOT_INSTANCES[i].toolcontainer)var t=FOOPLOT_INSTANCES[i];t.selectMode(this)},this.toolsMode.push({tool:n,id:e})):(n.onmousedown=function(){this.style.opacity=.7,this.style.filter="alpha(opacity=70)"},n.onmouseup=function(){this.style.opacity=1,this.style.filter=""},n.onmouseout=function(){this.style.opacity=1,this.style.filter=""},n.onclick=s),this.toolcontainer.appendChild(n),n},this.hideIntersection=function(){this.intersectionPoint.style.visibility="hidden",this.intersectionDisplay.style.visibility="hidden"},this.hideTrace=function(){this.tracePoint.style.visibility="hidden",this.traceDisplay.style.visibility="hidden"},this.toolsMode=[],this.selectedMode=FOOPLOT_MODE_MOVE,this.selectMode=function(t){for(i in this.hideIntersection(),this.hideTrace(),this.toolsMode)this.toolsMode[i].tool===t||this.toolsMode[i].id===t?(this.selectedMode=this.toolsMode[i].id,this.toolsMode[i].tool.style.opacity=.7,this.toolsMode[i].tool.style.filter="alpha(opacity=70)"):(this.toolsMode[i].tool.style.opacity=1,this.toolsMode[i].tool.style.filter="")},this.zoomTimeout=null,this.zoomSelf=null,this.zoomPendingFactor=1,this.zoom=function(t){this.zoomTimeout&&window.clearTimeout(this.zoomTimeout),FOOPLOT_TRANSITIONS&&this.canvas&&this.canvas.style&&1!=t&&(this.canvas.style.OTransition="-o-transform 0.4s ease",this.canvas.style.webkitTransition="-webkit-transform 0.4s ease",this.canvas.style.MozTransition="-moz-transform 0.4s ease",this.canvas.style.msTransition="-webkit-transform 0.4s ease",this.canvas.style.webkitTransform+="scale("+t+")",this.canvas.style.MozTransform+="scale("+t+")",this.canvas.style.msTransform+="scale("+t+")",this.canvas.style.OTransform+="scale("+t+")"),this.hideIntersection(),this.hideTrace(),this.zoomSelf=this,this.zoomPendingFactor*=t,this.zoomTimeout=window.setTimeout((function(t){if(!t)for(i in FOOPLOT_INSTANCES)if(FOOPLOT_INSTANCES[i].zoomSelf)t=FOOPLOT_INSTANCES[i].zoomSelf;var s=(t.xmax+t.xmin)/2,e=(t.ymax+t.ymin)/2;t.xmax=(t.xmax-s)/t.zoomPendingFactor+s,t.xmin=(t.xmin-s)/t.zoomPendingFactor+s,t.ymax=(t.ymax-e)/t.zoomPendingFactor+e,t.ymin=(t.ymin-e)/t.zoomPendingFactor+e,t.zoomPendingFactor=1,t.reDraw(),t.canvas.style.OTransition="color 0 ease",t.canvas.style.webkitTransition="",t.canvas.style.MozTransition="",t.canvas.style.msTransition="",t.canvas.style.webkitTransform="",t.canvas.style.MozTransform="",t.canvas.style.msTransform+="",t.canvas.style.OTransform="",t.onWindowChange([t.xmin,t.xmax,t.ymin,t.ymax]),t.zoomTimeout=null,t.zoomSelf=null}),FOOPLOT_TRANSITIONS?450:0,this)},this.toolZoomIn=this.addToolButton("url('data:image/gif;base64,R0lGODlhIAAgAPZRAP9/AP+AAP+AAf+AAv+BA/+BBP+DB/+GDf+GDv+HD/+KFv+LGP+MGv+OHf+PH/+QIv+UKf+UKv+YMv+aNv+bN/+gQf+iRf+jSP+kSf+nUP+oUv+pU/+pVP+qVv+sWf+wYf+xY/+2bv+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/HkP/Jk//Ll//Mmf/Onv/Qof/Ysv/bt//cuf/cuv/du//evf/evv/gwf/gwv/hw//jx//kyv/mzf/nz//s2v/v3//v4P/w4f/w4v/x4//y5v/06v/27f/48f/59P/69v/79//7+P/8+f/8+v/9+//+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAFIALAAAAAAgACAAAAf+gFJSAAEAhoeIiYqJglKFi5CRhwGDkpaSj5eak5oGDJuaFio6SFFGMycQoIoJLlGvsK9IIpmgFECxua85CqsJQ7lAP0S5MKsvuUuGFLofmxi6ygDMuUe9ly3Ry7pRHpo8uk3buimXBk2vNQnrCYYG7AmlUTmXD7AytYpLr0OXAfIyDAg0YCjAQAPyYmjKoW0atxOaVDSklguDJgnoYkmjCAtIO00lko2LVQGUAXCxePTwoUvDqgY1uIVzCSpACHm5hoyQ16TDKgAOQLDYUaQGig7tMOyL0oTmT0hKX/V8GgkDT1VUF0UtkbUqCUX5uiIKKxaRo7KJKAkihLaQoEAAOw==')",(function(){for(i in FOOPLOT_INSTANCES)if(this.parentNode===FOOPLOT_INSTANCES[i].toolcontainer)var t=FOOPLOT_INSTANCES[i];t.zoom(2)}),null,"Zoom In"),this.toolZoomOut=this.addToolButton("url('data:image/gif;base64,R0lGODlhIAAgAPZLAP9/AP+AAP+AAf+AAv+BBP+DB/+GDf+GDv+HD/+KFv+LF/+LGP+MGv+OHf+PH/+QIv+UKf+UKv+YMv+bN/+gQf+iRf+jSP+kSf+nUP+oUv+pU/+pVP+qVv+rWP+sWf+wYf+xY/+zZ/+2bv+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/HkP/Jk//Ll//Mmf/Onv/Qof/Ysv/bt//cuv/evf/evv/gwf/gwv/hw//jx//kyv/mzf/v4P/w4f/w4v/x4//06v/27f/48f/59P/69v/79//7+P/8+v/9+//+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEwALAAAAAAgACAAAAfXgExMAAEAhoeIiYqJgkyFi5CRhwGDkpaSj5eak5oFDJuaFSw5Q0tBMygQoIoIL0uvsK9DI5mgEzyxua84CqsIP7rBMaswwcYfmxfGxkILmi7Lxh2aO9HBKpcFR7khCt7exbE2lw+604gtuT+XAaWx54fpsTKaOda6KJoq97kXmhL8YPFAsKlEwCUUQBWoxi/DqgY1+B1xCCqACHfqSLg7wmEVgAcfWugAUiMFB4IXjLya6FFSypUdW0K6sFGVzEUvTdyMdKHEzlW1fipyJDQRJUFFDRUSFAgAOw==')",(function(){for(i in FOOPLOT_INSTANCES)if(this.parentNode===FOOPLOT_INSTANCES[i].toolcontainer)var t=FOOPLOT_INSTANCES[i];t.zoom(.5)}),null,"Zoom Out"),this.addToolSeparator(),this.toolMove=this.addToolButton("url('data:image/gif;base64,R0lGODlhIAAgAPY/AP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEAALAAAAAAgACAAAAf0gEBAAAEAhoeIiYqHhYJAhYuRkoyDk4mQloaYlhw5D5mEoAAjPz87E6KWBC6lpaepkQgwra09qLCJDhYWIKUiGhsXuJEZpRbDk8U/x8jExs0TwonKzIgUm4sRPBuK1IogLJMPOz8a3c+JvSiRDjq+u/C8pR7xuymlJIoBOLT9/v+lPijqALDgPxmLTPjKwLAhqR8gGjZsUYoGgkisMJxb9u2HjQWRAhCAoXEaOkQgcICchCDCxmqHMjBo5q3Zopo2TXLMaSgDCHClWIwYUSEngxv+VGAbpsAGrXU8DSGYgU/U0kUIYoCIqg/WI66UBIXi2QhIIAA7')",null,FOOPLOT_MODE_MOVE,"Move"),this.toolZoomBox=this.addToolButton("url('data:image/gif;base64,R0lGODlhIAAgAPYAAP9/AP+AAP+AAf+AAv+BA/+BBP+CBf+DB/+GDf+GDv+HD/+KFv+LGP+MGv+OHf+PH/+QIv+TJ/+UKf+UKv+YMv+bN/+gQf+iRf+jSP+kSf+nT/+nUP+oUv+pU/+pVP+qVv+sWf+uXv+wYf+xY/+1a/+2bv+3b/+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/Hj//HkP/Jk//JlP/Ll//Mmf/Onv/Qof/Xr//Ysv/bt//cuv/evf/evv/gwf/gwv/hw//jx//kyv/mzf/r1//v4P/w4f/w4v/x4//06v/27f/48f/59P/69v/79//7+P/8+v/9+//9/P/+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAFUALAAAAAAgACAAAAf+gFVVAAEAhoeIiYqHhYJVhYuRkoyDk5aTkJeajJoHDZuaFzFAS1RJOiwSoIoKNVSvsK9LJ5mgFUSxua8/C6sKR09LT03CS07Gx1Q4qzZUGoaQAdKHL1Qimxmvz4qZ1Uq9lzTahgfl5geG1VQfmkLjADe5JumvL5cHT+/xsfMA6j+XIMDatg9WP3VELgUo5cxQwVcHX+nQ5OPdjCEYMYagR2WFJnXbJIHUROGdSCpEFGxKQYVEhJcwY0ZoZgHUAXe6cnJY5WBHTl1Pdq4ywTAXERQMg64C8GDEjCBIdrT4oDKDk1dP2C2VZBWr0K2Lur5SBXYRhqsqykrCkELtqloObhU9ipsogCO60AAICgQAOw==')",null,FOOPLOT_MODE_ZOOMBOX,"Zoom Box"),this.toolTrace=this.addToolButton("url('data:image/gif;base64,R0lGODlhIAAgAMYAAP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v////9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/ACH5BAEAAD4ALAAAAAAgACAAAAdfgD4+AAEAhoeIiYqHhYI+hYuRkoyDk5aTkJeajJudnp+goaKjpKWmp6iJP6urqD+qr6SxirOgtbSsnre4rZu7vL+jrL2ph8GmxMUAw8rNzs/Q0YqZ0qePxQGOhKaNPoEAOw==')",null,FOOPLOT_MODE_TRACE,"Trace"),this.toolIntersection=this.addToolButton("url('data:image/gif;base64,R0lGODlhIAAgAMYAAP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v////9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/ACH5BAEAAD4ALAAAAAAgACAAAAdygD4+AAEAhoeIiYqHhYI+hYuRkoyDk5aTkJeajJuRP52gn6CaP6Kjlqank6mqi6ytiq+opaWeo6yyspK5ibq7trS+tp7BsLHFxojBwqe0yb2HzJ24z7ywvrXNl9mb0tHe3rfP44uZ5OeLj+gBjoTPjT6BADs=')",null,FOOPLOT_MODE_INTERSECTION,"Find Intersections and Roots"),this.zoomboxBox=document.createElement("div"),this.zoomboxBox.style.position="absolute",this.zoomboxBox.style.visibility="hidden",this.zoomboxBox.style.width="1px",this.zoomboxBox.style.height="1px",this.zoomboxBox.style.top="-1px",this.zoomboxBox.style.left="-1px",this.zoomboxBox.style.border="1px solid #ff8000",this.zoomboxBox.style.background="#ffa000",this.zoomboxBox.style.opacity=.5,this.zoomboxBox.style.filter="alpha(opacity=50)",this.zoomboxBox.style.zIndex=50,this.container.appendChild(this.zoomboxBox),this.tracePoint=document.createElement("div"),this.tracePoint.style.position="absolute",this.tracePoint.style.visibility="hidden",this.tracePoint.style.width="5px",this.tracePoint.style.height="5px",this.tracePoint.style.top="-1px",this.tracePoint.style.left="-1px",this.tracePoint.style.border="1px solid #ffffff",this.tracePoint.style.background="#ff8000",this.tracePoint.style.zIndex=50,this.container.appendChild(this.tracePoint),this.traceDisplay=document.createElement("div"),this.traceDisplayText=document.createTextNode(""),this.traceDisplay.style.position="absolute",this.traceDisplay.style.visibility="hidden",this.traceDisplay.style.height="20px",this.traceDisplay.style.padding="4px",this.traceDisplay.style.top="-1px",this.traceDisplay.style.left="-1px",this.traceDisplay.style.border="1px solid #a0a0a0",this.traceDisplay.style.background="#ffffff",this.traceDisplay.style.webkitBoxShadow="5px 5px 5px #808080",this.traceDisplay.style.MozBoxShadow="5px 5px 5px #808080",this.traceDisplay.style.OBoxShadow="5px 5px 5px #808080",this.traceDisplay.style.msBoxShadow="5px 5px 5px #808080",this.traceDisplay.style.boxShadow="5px 5px 5px #808080",this.traceDisplay.style.zIndex=50,this.traceDisplay.appendChild(this.traceDisplayText),this.container.appendChild(this.traceDisplay),this.intersectionPoint=document.createElement("div"),this.intersectionPoint.style.position="absolute",this.intersectionPoint.style.visibility="hidden",this.intersectionPoint.style.width="5px",this.intersectionPoint.style.height="5px",this.intersectionPoint.style.top="-1px",this.intersectionPoint.style.left="-1px",this.intersectionPoint.style.border="1px solid #ffffff",this.intersectionPoint.style.background="#ff8000",this.intersectionPoint.style.zIndex=50,this.container.appendChild(this.intersectionPoint),this.intersectionDisplay=document.createElement("div"),this.intersectionDisplayText=document.createTextNode(""),this.intersectionDisplay.style.position="absolute",this.intersectionDisplay.style.visibility="hidden",this.intersectionDisplay.style.height="20px",this.intersectionDisplay.style.padding="4px",this.intersectionDisplay.style.top="-1px",this.intersectionDisplay.style.left="-1px",this.intersectionDisplay.style.border="1px solid #a0a0a0",this.intersectionDisplay.style.background="#ffffff",this.intersectionDisplay.style.webkitBoxShadow="5px 5px 5px #808080",this.intersectionDisplay.style.MozBoxShadow="5px 5px 5px #808080",this.intersectionDisplay.style.OBoxShadow="5px 5px 5px #808080",this.intersectionDisplay.style.msBoxShadow="5px 5px 5px #808080",this.intersectionDisplay.style.boxShadow="5px 5px 5px #808080",this.intersectionDisplay.style.zIndex=50,this.intersectionDisplay.appendChild(this.intersectionDisplayText),this.container.appendChild(this.intersectionDisplay),this.selectMode(FOOPLOT_MODE_MOVE),this.canvas=!1,this.context=!1,this.vars={pi:3.141592653589793,e:2.718281828459045,s:0,t:0,x:0,theta:0},this.plots=[],this.plotlastid=0,this.width=!1,this.height=!1,this.xmin=-6.5,this.xmax=6.5,this.ymin=-8.5,this.ymax=8.5,this.xgrid="",this.ygrid="",this.xgridunits=null,this.ygridunits=null,this.showGrid=!0,this.showAxes=!0,this.showTicks=!0,this.showLabels=!0,this.gridColor="#555",this.axesColor="#999",this.labelsColor="#ddd",this.backgroundColor="#333",this.setSize=function(){this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this.recorder.width=this.width,this.recorder.height=this.height},this.canvas=document.createElement("canvas");try{FOOPLOT_MSIE&&G_vmlCanvasManager.initElement(this.canvas)}catch(t){}this.subcontainer.appendChild(this.canvas),this.setSize(),this.canvas.style.webkitBackfaceVisibility="hidden",this.canvas.style.webkitTransform="translate3d(0,0,0)",this.canvas.style.MozTransform="translate3d(0,0,0)",this.context=this.canvas.getContext("2d"),this.getRealGrid=function(){return parseFloat(this.xgrid)?realxgrid=this.xgrid:(orderfull=Math.log(this.xmax-this.xmin)/Math.log(10)-.9,order=Math.floor(orderfull),rem=orderfull-order,realxgrid=Math.pow(10,order),rem>.7?realxgrid*=5:rem>.3&&(realxgrid*=2)),parseFloat(this.ygrid)?realygrid=this.ygrid:(orderfull=Math.log(this.width/this.height*(this.ymax-this.ymin))/Math.log(10)-.9,order=Math.floor(orderfull),rem=orderfull-order,realygrid=Math.pow(10,order),rem>.7?realygrid*=5:rem>.3&&(realygrid*=2)),[realxgrid,realygrid]},this.drawGrid=function(){var t,i,s,e,o,n,h;if(o=(h=this.getRealGrid())[0],n=h[1],(this.ymax-this.ymin)/n>this.height/2||(this.xmax-this.xmin)/o>this.width/2)this.context.fillRect(0,0,this.width,this.height);else{for(this.context.beginPath(),e=Math.ceil(this.ymin/n)*n;e<=this.ymax;e+=n)i=(1-(e-this.ymin)/(this.ymax-this.ymin))*this.height,this.context.moveTo(0,Math.floor(i)),this.context.lineTo(this.width,Math.floor(i));for(s=Math.ceil(this.xmin/o)*o;s<=this.xmax;s+=o)t=(s-this.xmin)/(this.xmax-this.xmin)*this.width,this.context.moveTo(Math.floor(t),0),this.context.lineTo(Math.floor(t),this.height);this.context.stroke()}},this.drawLabels=function(){var t,i,s,e,o,n;g=this.getRealGrid(),o=g[0],n=g[1];var h=Math.pow(10,2-Math.floor(Math.log(this.xmax-this.xmin)/Math.log(10))),A=Math.pow(10,2-Math.floor(Math.log(this.ymax-this.ymin)/Math.log(10)));if(this.context.font="10px Droid Sans,Trebuchet MS,Arial,Helvetica,sans-serif",t=(0-this.xmin)/(this.xmax-this.xmin)*this.width,this.context.textAlign="left",t<0&&(t=0),t>this.width-this.width/80-16&&(this.xmax>0?t-=20:t=this.width-this.width/100-18,this.context.textAlign="right"),(this.ymax-this.ymin)/n<this.height/6)for(e=Math.floor(this.ymin/n)*n;e<=this.ymax;e+=n)i=(this.ymax-e)/(this.ymax-this.ymin)*this.height,this.ygridunits===FOOPLOT_UNITS_PI?printy=this.tryToMakeFraction(e/this.vars.pi)+"π":this.ygridunits===FOOPLOT_UNITS_E?printy=this.tryToMakeFraction(e/this.vars.e)+"e":printy=parseFloat(Math.round(e*A)/A),i>8&&i<this.height-8&&this.context.fillText(printy,t+this.width/80,i+2.5);if(this.context.textAlign="center",(i=this.ymax/(this.ymax-this.ymin)*this.height)<0&&(i=0),i>this.height-16-this.width/80&&(this.ymin<0?i-=22:i=this.height-20-this.width/100),(this.xmax-this.xmin)/o<this.width/6)for(s=Math.floor(this.xmin/o)*o;s<=this.xmax;s+=o)t=(s-this.xmin)/(this.xmax-this.xmin)*this.width,this.xgridunits===FOOPLOT_UNITS_PI?printx=this.tryToMakeFraction(s/this.vars.pi)+"π":this.xgridunits===FOOPLOT_UNITS_E?printx=this.tryToMakeFraction(s/this.vars.e)+"e":printx=parseFloat(Math.round(s*h)/h),t>8&&t<this.width-8&&this.context.fillText(printx,t,i+this.width/80+8)},this.drawAxes=function(){var t,i,s,e,o,n;if(g=this.getRealGrid(),o=g[0],n=g[1],this.xmin<0&&this.xmax>0?t=(0-this.xmin)/(this.xmax-this.xmin)*this.width:this.xmin>=0?t=0:this.xmax<=0&&(t=this.width),this.context.beginPath(),this.context.moveTo(t,0),this.context.lineTo(t,this.height),this.context.stroke(),this.showTicks)if((this.ymax-this.ymin)/n>this.height/2)this.context.fillRect(t-this.width/100,0,this.width/50,this.height);else{for(this.context.beginPath(),e=Math.floor(this.ymin/n)*n;e<=this.ymax;e+=n)i=(this.ymax-e)/(this.ymax-this.ymin)*this.height,this.context.moveTo(t-this.width/100,i),this.context.lineTo(t+this.width/100,i);this.context.stroke()}if(this.ymin<0&&this.ymax>0?i=(1-(0-this.ymin)/(this.ymax-this.ymin))*this.height:this.ymin>=0?i=this.height:this.ymax<=0&&(i=0),this.context.beginPath(),this.context.moveTo(0,i),this.context.lineTo(this.width,i),this.context.stroke(),this.showTicks)if((this.xmax-this.xmin)/o>this.width/2)this.context.fillRect(0,i-this.width/100,this.width,this.width/50);else{for(this.context.beginPath(),s=Math.floor(this.xmin/o)*o;s<=this.xmax;s+=o)t=(s-this.xmin)/(this.xmax-this.xmin)*this.width,this.context.moveTo(t,i-this.width/100),this.context.lineTo(t,i+this.width/100);this.context.stroke()}},this.clear=function(){this.context!=this.recorder&&(this.canvas.width=this.canvas.width),this.context.clear&&this.context.clear(),this.context.fillStyle=this.backgroundColor,this.context.fillRect(0,0,this.width,this.height)},this.isMouseDown=0,this.dragInitX=0,this.dragInitY=0,this.dpx=0,this.dpy=0,this.container.onmousemove=function(t){for(i in null===t&&(t=window.event),FOOPLOT_INSTANCES)if(this===FOOPLOT_INSTANCES[i].container)var s=FOOPLOT_INSTANCES[i];if(t&&t.preventDefault&&t.preventDefault(),t&&"fooplot-tool"===(t.srcElement?t.srcElement:t.target).className)return null;if(s.zoomTimeout)return null;var e=s.container.offsetLeft,o=s.container.offsetTop;s.container.parentNode&&(e+=s.container.parentNode.offsetLeft,o+=s.container.parentNode.offsetTop);var n=(FOOPLOT_MSIE?document.body.scrollLeft+event.clientX:t.pageX)-e,h=(FOOPLOT_MSIE?document.body.scrollTop+event.clientY:t.pageY)-o;if(s.isMouseDown)switch(s.dpx=n-s.dragInitX,s.dpy=h-s.dragInitY,s.selectedMode){case FOOPLOT_MODE_MOVE:console.log(s.dpx+","+s.dpy),s.subcontainer.style.left=s.dpx+"px",s.subcontainer.style.top=s.dpy+"px";break;case FOOPLOT_MODE_ZOOMBOX:s.zoomboxBox.style.width=s.dpx+"px",s.zoomboxBox.style.height=s.dpy+"px";break;case FOOPLOT_MODE_TRACE:var A=n/s.width*(s.xmax-s.xmin)+s.xmin,a=Math.pow(10,2-Math.floor(Math.log(s.xmax-s.xmin)/Math.log(10))),r=(A=parseFloat(Math.floor(A*a)/a),(1-h/s.height)*(s.ymax-s.ymin)+s.ymin);s.showTrace(A,r)}},this.container.onmouseover=function(t){for(i in null===t&&(t=window.event),FOOPLOT_INSTANCES)if(this===FOOPLOT_INSTANCES[i].container)var s=FOOPLOT_INSTANCES[i];if(t&&t.preventDefault&&t.preventDefault(),s.toolcontainer.style.visibility="visible",t&&"fooplot-tool"===(t.srcElement?t.srcElement:t.target).className)return null},this.container.onmouseout=function(t){for(i in null===t&&(t=window.event),FOOPLOT_INSTANCES)if(this===FOOPLOT_INSTANCES[i].container)var s=FOOPLOT_INSTANCES[i];if(t&&t.preventDefault&&t.preventDefault(),s.toolcontainer.style.visibility="hidden",t&&"fooplot-tool"==(t.srcElement?t.srcElement:t.target).className)return null;this.onmouseup(t)},this.container.onmousedown=function(t){for(i in null===t&&(t=window.event),FOOPLOT_INSTANCES)if(this===FOOPLOT_INSTANCES[i].container)var s=FOOPLOT_INSTANCES[i];if(t&&t.preventDefault&&t.preventDefault(),t&&"fooplot-tool"==(t.srcElement?t.srcElement:t.target).className)return null;if(s.zoomTimeout)return null;var e=s.container.offsetLeft,o=s.container.offsetTop;s.container.parentNode&&(e+=s.container.parentNode.offsetLeft,o+=s.container.parentNode.offsetTop);var n=(FOOPLOT_MSIE?document.body.scrollLeft+event.clientX:t.pageX)-e,h=(FOOPLOT_MSIE?document.body.scrollTop+event.clientY:t.pageY)-o;switch(s.dragInitX=n,s.dragInitY=h,s.isMouseDown=!0,s.selectedMode){case FOOPLOT_MODE_ZOOMBOX:s.zoomboxBox.style.left=n+"px",s.zoomboxBox.style.top=h+"px",s.zoomboxBox.style.width="0px",s.zoomboxBox.style.height="0px",s.zoomboxBox.style.visibility="visible"}},this.container.onmouseup=function(t){for(i in null===t&&(t=window.event),t&&t.preventDefault&&t.preventDefault(),FOOPLOT_INSTANCES)if(this===FOOPLOT_INSTANCES[i].container)var s=FOOPLOT_INSTANCES[i];var e=s.container.offsetLeft,o=s.container.offsetTop;s.container.parentNode&&(e+=s.container.parentNode.offsetLeft,o+=s.container.parentNode.offsetTop);var n=(FOOPLOT_MSIE?document.body.scrollLeft+event.clientX:t.pageX)-e,h=(FOOPLOT_MSIE?document.body.scrollTop+event.clientY:t.pageY)-o;if(s.isMouseDown)switch(s.isMouseDown=!1,s.selectedMode){case FOOPLOT_MODE_MOVE:if(s.zoomTimeout)return null;console.log("out "+s.dpx+","+s.dpy);var A=s.dpx/s.width*(s.xmax-s.xmin),a=s.dpy/s.height*(s.ymax-s.ymin);s.xmin-=A,s.xmax-=A,s.ymin+=a,s.ymax+=a,s.dpx=0,s.dpy=0,s.subcontainer.style.left="0px",s.subcontainer.style.top="0px",s.reDraw(),s.onWindowChange([s.xmin,s.xmax,s.ymin,s.ymax]);break;case FOOPLOT_MODE_ZOOMBOX:if(s.zoomboxBox.style.visibility="hidden",s.selectMode(FOOPLOT_MODE_MOVE),parseInt(s.zoomboxBox.style.width)>5&&parseInt(s.zoomboxBox.style.height)>5){var r=parseInt(s.zoomboxBox.style.left)/s.width*(s.xmax-s.xmin)+s.xmin,l=s.ymax-parseInt(s.zoomboxBox.style.top)/s.height*(s.ymax-s.ymin),c=(parseInt(s.zoomboxBox.style.left)+parseInt(s.zoomboxBox.style.width))/s.width*(s.xmax-s.xmin)+s.xmin,x=s.ymax-(parseInt(s.zoomboxBox.style.top)+parseInt(s.zoomboxBox.style.height))/s.height*(s.ymax-s.ymin);s.xmin=r,s.xmax=c,s.ymin=x,s.ymax=l,s.reDraw(),s.onWindowChange([s.xmin,s.xmax,s.ymin,s.ymax])}break;case FOOPLOT_MODE_INTERSECTION:s.showIntersection(s.dragInitX/s.width*(s.xmax-s.xmin)+s.xmin);break;case FOOPLOT_MODE_TRACE:var p=n/s.width*(s.xmax-s.xmin)+s.xmin,d=Math.pow(10,2-Math.floor(Math.log(s.xmax-s.xmin)/Math.log(10))),u=(p=parseFloat(Math.floor(p*d)/d),(1-h/s.height)*(s.ymax-s.ymin)+s.ymin);s.showTrace(p,u)}},this.lastTouch=null,this.container.ontouchmove=function(t){for(i in t.preventDefault(),FOOPLOT_INSTANCES)if(this===FOOPLOT_INSTANCES[i].container)var s=FOOPLOT_INSTANCES[i];if(t.touches.length>=1){var e=t.touches[0];s.lastTouch=e,this.mousemove(e)}else s.lastTouch=null},this.container.ontouchstart=function(t){for(i in t.preventDefault(),FOOPLOT_INSTANCES)if(this===FOOPLOT_INSTANCES[i].container)var s=FOOPLOT_INSTANCES[i];if(t.touches.length>=1){var e=t.touches[0];s.lastTouch=e,this.mousedown(e)}else s.lastTouch=null},this.container.ontouchend=function(t){for(i in t.preventDefault(),FOOPLOT_INSTANCES)if(this===FOOPLOT_INSTANCES[i].container)var s=FOOPLOT_INSTANCES[i];0==t.touches.length&&(this.mouseup(s.lastTouch),s.lastTouch=null)},this.onmousewheel=function(t){for(i in null===t&&(t=window.event),FOOPLOT_INSTANCES)if(this===FOOPLOT_INSTANCES[i].container)var s=FOOPLOT_INSTANCES[i];if(t&&t.preventDefault?t.preventDefault():t.returnValue=!1,t&&"fooplot-tool"==(t.srcElement?t.srcElement:t.target).className)return null;var e=0;t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e>0&&s.zoomPendingFactor<=8?s.zoom(1.25):e<0&&s.zoomPendingFactor>=.125?s.zoom(.8):e&&s.zoom(1)},this.container.onmousewheel=this.onmousewheel,this.container.addEventListener&&this.container.addEventListener("DOMMouseScroll",this.onmousewheel,!1),this.drawPoints=function(t){if(t.length)for(i in t)2==t[i].length&&(px=(t[i][0]-this.xmin)/(this.xmax-this.xmin)*this.width,py=(this.ymax-t[i][1])/(this.ymax-this.ymin)*this.height,!isNaN(px)&&!isNaN(py)&&0<=px&&px<=this.width&&0<=py&&py<=this.height&&this.context.fillRect(px-2,py-2,5,5))},this.drawFunction=function(t){var i,s,e,o,n,h,A,a=!1,r=!1;this.context.beginPath();var l=FOOPLOT_MSIE?1:.25;for(this.context.moveTo(-10,this.height/2),i=0;i<this.width;i+=l)this.vars.x=i/this.width*(this.xmax-this.xmin)+this.xmin,e=t(this.vars),isNaN(e)?(n=!1,a=!0):(n=(s=(this.ymax-e)/(this.ymax-this.ymin)*this.height)>=0&&s<=this.height,s>this.height+100&&(s=this.height+100),s<-100&&(s=-100),a=!1),l>.001&&n&&!o?(i-=l,l/=10):(r||a||!o&&!n?!r&&!a&&A*e<0&&A*e>Math.min(-10,this.ymin-this.ymax)?this.context.lineTo(i,s):this.context.moveTo(i,s):this.context.lineTo(i,s),n?l/=Math.abs(h-s):l=1,l>2?l=2:l<.001?l=.001:isNaN(l)&&(l=1),i,h=s,A=e,o=n,r=a);this.context.stroke()},this.drawPolar=function(t,i,s,e){var o,n,h,A,a,r,l;this.context.beginPath();var c=!1;for(this.vars.theta=i;this.vars.theta<=s;this.vars.theta+=e)h=(a=t(this.vars))*Math.cos(this.vars.theta),A=a*Math.sin(this.vars.theta),isNaN(A)||isNaN(h)?l=!1:(o=(h-this.xmin)/(this.xmax-this.xmin)*this.width,n=(this.ymax-A)/(this.ymax-this.ymin)*this.height,c||(c=!0,this.context.moveTo(o,n)),l=o>0&&o<this.width&&n>0&&n<this.height,r||l?this.context.lineTo(o,n):this.context.moveTo(o,n)),r=l;this.context.stroke()},this.drawParametric=function(t,i,s,e,o){var n,h,A,a,r,l,c=!1;for(this.context.beginPath(),this.vars.s=s;this.vars.s<=e;this.vars.s+=o)A=t(this.vars),a=i(this.vars),isNaN(a)||isNaN(A)?l=!1:(n=(A-this.xmin)/(this.xmax-this.xmin)*this.width,h=(this.ymax-a)/(this.ymax-this.ymin)*this.height,c||(c=!0,this.context.moveTo(n,h)),l=n>0&&n<this.width&&h>0&&h<this.height,r||l?this.context.lineTo(n,h):this.context.moveTo(n,h)),r=l;this.context.stroke()},this.findIntersection=function(t,i,s){var e,o,n=0;if(null===t)return 0;for(null===i&&(i=function(){return 0}),this.vars.x=s,e=t(this.vars)-i(this.vars);n<100;)n++,e=t(this.vars)-i(this.vars),this.vars.x+=1e-10,e-(o=t(this.vars)-i(this.vars))!=0&&(this.vars.x+=1e-10*e/(e-o));return e=t(this.vars)-i(this.vars),isNaN(this.vars.x)||Math.abs(e)>1e-9?null:parseFloat(this.vars.x.toFixed(9))},this.showTrace=function(t,i){var s,e,o=1e10,n=null,h=null;for(s in this.vars.x=t,this.plots)this.plots[s].type===FOOPLOT_TYPE_FUNCTION&&(e=this.plots[s].jeq(this.vars),Math.abs(e-i)<o&&(o=Math.abs(e-i),n=s,h=e));if(null===n)return null;px=(t-this.xmin)/(this.xmax-this.xmin)*this.width,py=(this.ymax-h)/(this.ymax-this.ymin)*this.height,this.tracePoint.style.visibility="",this.tracePoint.style.left=px-3+"px",this.tracePoint.style.top=py-3+"px",this.traceDisplay.style.visibility="",this.traceDisplay.style.left=px+"px",this.traceDisplay.style.top=py+8-(py>this.height/2?48:0)+"px",this.traceDisplayText.nodeValue="("+parseFloat(t.toFixed(9))+","+parseFloat(h.toFixed(9))+")"},this.showIntersection=function(t){this.vars.x=t;var i,s,e,o,n=1e10,h=null;for(i in this.plotstmp=this.plots.slice(0),this.plotstmp.unshift({type:FOOPLOT_TYPE_FUNCTION,jeq:function(){return 0}}),this.plotstmp)if(this.plotstmp[i].type===FOOPLOT_TYPE_FUNCTION)for(s in this.plotstmp)i!=s&&this.plotstmp[s].type===FOOPLOT_TYPE_FUNCTION&&(e=this.plotstmp[i].jeq(this.vars),o=this.plotstmp[s].jeq(this.vars),Math.abs(e-o)<n&&(n=Math.abs(e-o),h=[i,s]));if(null===h)return null;xroot=this.findIntersection(this.plotstmp[h[0]].jeq,this.plotstmp[h[1]].jeq,t),y=this.plotstmp[h[0]].jeq(this.vars),y=parseFloat(y.toFixed(9)),px=(xroot-this.xmin)/(this.xmax-this.xmin)*this.width,py=(this.ymax-y)/(this.ymax-this.ymin)*this.height,null!=xroot&&(this.intersectionPoint.style.visibility="",this.intersectionPoint.style.left=px-3+"px",this.intersectionPoint.style.top=py-3+"px",this.intersectionDisplay.style.visibility="",this.intersectionDisplay.style.left=px+"px",this.intersectionDisplay.style.top=py+8-(py>this.height/2?48:0)+"px",this.intersectionDisplayText.nodeValue="("+xroot+","+y+")")},this.tryToMakeFraction=function(t){for(var i,s=1;s<16;s++)if(-1!=(i=(t*s).toFixed(9)).indexOf(".000000000"))return parseFloat(i)+(1===s?"":"/"+s);return parseFloat(t.toFixed(9)).toString()},this.parseEquationError="",this.parseEquationHasElement=function(t,i){for(var s=0;s<t.length;s++)if(t[s]===i)return!0;return!1},this.parseEquationFixPowers=function(t){if(null===t)return!this.parseEquationError&&(this.parseEquationError="syntax error"),null;for(i=0;i<t.length;i++)if(this.parseEquationIsArray(t[i])&&(t[i]=this.parseEquationFixPowers(t[i]),null===t[i]))return!this.parseEquationError&&(this.parseEquationError="syntax error"),null;for(var i=0;i<t.length;i++)if("^"===t[i]){if(null===t[i-1]||null===t[i+1])return this.parseEquationError="^ requires two arguments, for example x^2 or (x+1)^(x+2).",null;t.splice(i-1,3,new Array("Math.pow",new Array("(",t[i-1],",",t[i+1],")"))),i-=2}return t},this.parseEquationFixFunctions=function(t){if(null===t)return!this.parseEquationError&&(this.parseEquationError="syntax error"),null;for(i=0;i<t.length;i++)if(this.parseEquationIsArray(t[i])&&(t[i]=this.parseEquationFixFunctions(t[i]),null===t[i]))return!this.parseEquationError&&(this.parseEquationError="syntax error"),null;for(var i=0;i<t.length;i++)if(!this.parseEquationIsArray(t[i])&&null!=FOOPLOT_MATH[t[i]]){if(null===t[i+1])return this.parseEquationEror="function "+t[i]+" requires an argument.",null;t[i]="FOOPLOT_MATH."+t[i].toLowerCase(),t.splice(i,2,new Array("(",t[i],t[i+1],")")),i--}return t},this.parseEquationIsArray=function(t){return null==t?0:-1!==t.constructor.toString().indexOf("Array")},this.parseEquationJoinArray=function(t){for(var i="",s=0;s<t.length;s++)this.parseEquationIsArray(t[s])?i+=this.parseEquationJoinArray(t[s]):i+=t[s];return i},this.parseEquation=function(eq,vars){var jeq=null,tokens,e,i,pstart=-1,pend;for(vars||(vars=this.vars),jeq_error="",e=eq.replace(/ /g,""),e=e.replace(/([0-9])([a-df-z]|[a-z][a-z]|\()/gi,"$1*$2"),e=e.replace(/(\))([0-9a-df-z]|[a-z][a-z]|\()/gi,"$1*$2"),e=e.replace(/([a-z0-9\.])([^a-z0-9\.])/gi,"$1 $2"),e=e.replace(/([^a-z0-9\.])([a-z0-9\.])/gi,"$1 $2"),e=e.replace(/(\-|\)|\()/g," $1 "),tokens=e.split(/ +/),i=0;i<tokens.length;i++)if(tokens[i]=tokens[i].replace(/ /g,""),tokens[i]=tokens[i].replace(/_/g,"."),""===tokens[i])tokens.splice(i,1),i--;else if(tokens[i].match(/^[a-z][a-z0-9]*$/i)&&null!=vars[tokens[i]])tokens[i]="vars."+tokens[i];else if(tokens[i].length>0&&tokens[i].match(/^[a-z][a-z0-9]*$/i)&&void 0===FOOPLOT_MATH[tokens[i]])return this.parseEquationError="invalid variable or function: "+tokens[i],null;for(;this.parseEquationHasElement(tokens,"(")||this.parseEquationHasElement(tokens,")");){for(pstart=-1,i=0;i<tokens.length;i++){if("("===tokens[i]&&(pstart=i),")"===tokens[i]&&-1==pstart)return this.parseEquationError="unmatched right parenthesis )",null;")"===tokens[i]&&-1!=pstart&&(tokens.splice(pstart,i-pstart+1,tokens.slice(pstart,i+1)),i=-1,pstart=-1)}if(-1!=pstart)return this.parseEquationError="unmatched left parenthesis (",null}return tokens=this.parseEquationFixFunctions(tokens),null===tokens?null:(tokens=this.parseEquationFixPowers(tokens),null===tokens?null:(eval("jeq=function(vars) { return "+this.parseEquationJoinArray(tokens)+"; }"),jeq))},this.parseConst=function(t){var i={pi:this.vars.pi,e:this.vars.e},s=this.parseEquation(t,i);return s?parseFloat(s(i)):(alert(this.parseEquationError),0)},this.reDraw=function(){for(var t in this.hideIntersection(),this.hideTrace(),this.clear(),this.showGrid&&(this.context.strokeStyle=this.gridColor,this.context.fillStyle=this.gridColor,this.drawGrid()),this.showAxes&&(this.context.strokeStyle=this.axesColor,this.context.fillStyle=this.axesColor,this.drawAxes()),this.showLabels&&(this.context.fillStyle=this.labelsColor,this.drawLabels()),this.plots)switch(this.context.strokeStyle="#000000",this.plots[t].type){case FOOPLOT_TYPE_FUNCTION:this.context.strokeStyle=this.plots[t].options.color,this.drawFunction(this.plots[t].jeq);break;case FOOPLOT_TYPE_POLAR:this.context.strokeStyle=this.plots[t].options.color,this.drawPolar(this.plots[t].jeq,this.plots[t].options.thetamin,this.plots[t].options.thetamax,this.plots[t].options.thetastep);break;case FOOPLOT_TYPE_PARAMETRIC:this.context.strokeStyle=this.plots[t].options.color,this.drawParametric(this.plots[t].jeqx,this.plots[t].jeqy,this.plots[t].options.smin,this.plots[t].options.smax,this.plots[t].options.sstep);break;case FOOPLOT_TYPE_POINTS:this.context.fillStyle=this.plots[t].options.color,this.drawPoints(this.plots[t].eq)}FOOPLOT_MSIE&&(this.context.beginPath(),this.context.moveTo(0,-1),this.context.lineTo(-1,-1),this.context.stroke())},this.addPlot=function(t,i,s){switch(i||(i=FOOPLOT_TYPE_FUNCTION),s||(s={}),s.color||(s.color="#000000"),s.width||(s.width=1),i){case FOOPLOT_TYPE_FUNCTION:if(!(e=this.parseEquation(t)))return alert(this.parseEquationError),null;this.plots.push({id:this.plotlastid++,type:i,eq:t,jeq:e,options:s});break;case FOOPLOT_TYPE_POLAR:var e;if(!(e=this.parseEquation(t)))return alert(this.parseEquationError),null;s.thetamin=s.thetamin?this.parseConst(s.thetamin):0,s.thetamax=s.thetamax?this.parseConst(s.thetamax):2*this.vars.pi,s.thetastep=s.thetastep?this.parseConst(s.thetastep):.01,s.thetastep<=0&&(s.thetastep=.01),this.plots.push({id:this.plotlastid++,type:i,eq:t,jeq:e,options:s});break;case FOOPLOT_TYPE_PARAMETRIC:var o=this.parseEquation(t[0]);if(!o)return alert(this.parseEquationError),null;var n=this.parseEquation(t[1]);if(!n)return alert(this.parseEquationError),null;s.smin=s.smin?this.parseConst(s.smin):0,s.smax=s.smax?this.parseConst(s.smax):10,s.sstep=s.sstep?this.parseConst(s.sstep):.01,this.plots.push({id:this.plotlastid++,type:i,eq:t,jeqx:o,jeqy:n,options:s});break;case FOOPLOT_TYPE_POINTS:if(null===t.length)return null;this.plots.push({id:this.plotlastid++,type:i,eq:t,options:s});break;default:alert("Error: invalid plot type")}return this.plots.size},this.deletePlot=function(t){},this.deleteAllPlots=function(){this.plots=[]},this.getGrid=function(){return[this.xgrid,this.ygrid]},this.setGrid=function(t){t[0]=t[0].replace(" ",""),t[0]?(t[0]=this.parseConst(t[0]),t[0]<=0&&(t[0]=1),this.xgrid=t[0],null!==(720*t[0]/this.vars.pi).toFixed(6).match(/0000$/)?this.xgridunits=FOOPLOT_UNITS_PI:null!==(720*t[0]/this.vars.e).toFixed(6).match(/0000$/)?this.xgridunits=FOOPLOT_UNITS_E:this.xgridunits=null):(this.xgrid=null,this.xgridunits=null),t[1]=t[1].replace(" ",""),t[1]?(t[1]=this.parseConst(t[1]),t[1]<=0&&(t[1]=1),this.ygrid=t[1],null!==(720*t[1]/this.vars.pi).toFixed(6).match(/0000$/)?this.ygridunits=FOOPLOT_UNITS_PI:null!==(720*t[1]/this.vars.e).toFixed(6).match(/0000$/)?this.ygridunits=FOOPLOT_UNITS_E:this.ygridunits=null):(this.ygrid=null,this.ygridunits=null)},this.getWindow=function(){return[this.xmin,this.xmax,this.ymin,this.ymax]},this.setWindow=function(t){t[0]=this.parseConst(t[0]),t[1]=this.parseConst(t[1]),t[2]=this.parseConst(t[2]),t[3]=this.parseConst(t[3]),t[1]>t[0]&&t[3]>t[2]&&(this.xmin=t[0],this.xmax=t[1],this.ymin=t[2],this.ymax=t[3])},this.setBackgroundColor=function(t){this.backgroundColor=t,this.container.style.background=t,this.subcontainer.style.background=t},this.setLabelsColor=function(t){this.labelsColor=t},this.setAxesColor=function(t){this.axesColor=t},this.setGridColor=function(t){this.gridColor=t},this.setShowAxes=function(t){this.showAxes=t},this.setShowTicks=function(t){this.showTicks=t},this.setShowLabels=function(t){this.showLabels=t},this.setShowGrid=function(t){this.showGrid=t},this.getSVG=function(){return this.context=this.recorder,this.reDraw(),this.context=this.canvas.getContext("2d"),this.recorder.getSVG()},this.onWindowChange=function(t){}}var FOOPLOT_TYPE_FUNCTION=0,FOOPLOT_TYPE_POLAR=1,FOOPLOT_TYPE_PARAMETRIC=2,FOOPLOT_TYPE_POINTS=3,FOOPLOT_MODE_MOVE=1,FOOPLOT_MODE_ZOOMBOX=2,FOOPLOT_MODE_INTERSECTION=3,FOOPLOT_MODE_TRACE=4,FOOPLOT_UNITS_PI=1,FOOPLOT_UNITS_E=2,FOOPLOT_INSTANCES=[];FOOPLOT_MATH={},FOOPLOT_MATH.sin=Math.sin,FOOPLOT_MATH.cos=Math.cos,FOOPLOT_MATH.tan=Math.tan,FOOPLOT_MATH.asin=Math.asin,FOOPLOT_MATH.acos=Math.acos,FOOPLOT_MATH.atan=Math.atan,FOOPLOT_MATH.abs=Math.abs,FOOPLOT_MATH.floor=Math.floor,FOOPLOT_MATH.ceil=Math.ceil,FOOPLOT_MATH.exp=Math.exp,FOOPLOT_MATH.sqrt=Math.sqrt,FOOPLOT_MATH.max=Math.max,FOOPLOT_MATH.min=Math.min,FOOPLOT_MATH.sec=function(t){return 1/Math.cos(t)},FOOPLOT_MATH.csc=function(t){return 1/Math.sin(t)},FOOPLOT_MATH.cot=function(t){return 1/Math.tan(t)},FOOPLOT_MATH.asec=function(t){return Math.acos(1/t)},FOOPLOT_MATH.acsc=function(t){return Math.asin(1/t)},FOOPLOT_MATH.acot=function(t){return Math.atan(1/t)},FOOPLOT_MATH.ln=function(t){return Math.log(t)},FOOPLOT_MATH.log=function(t){return Math.log(t)/Math.log(10)},FOOPLOT_MATH.sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2},FOOPLOT_MATH.cosh=function(t){return(Math.exp(t)+Math.exp(-t))/2},FOOPLOT_MATH.tanh=function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},FOOPLOT_MATH.asinh=function(t){return Math.log(t+Math.sqrt(t*t+1))},FOOPLOT_MATH.acosh=function(t){return Math.log(t+Math.sqrt(t*t-1))},FOOPLOT_MATH.atanh=function(t){return.5*Math.log((1+t)/(1-t))},FOOPLOT_MATH.sech=function(t){return 2/(Math.exp(t)+Math.exp(-t))},FOOPLOT_MATH.csch=function(t){return 2/(Math.exp(t)-Math.exp(-t))},FOOPLOT_MATH.coth=function(t){return(Math.exp(t)+Math.exp(-t))/(Math.exp(t)-Math.exp(-t))},FOOPLOT_MATH.asech=function(t){return Math.log(1/t+Math.sqrt(1/t/t-1))},FOOPLOT_MATH.acsch=function(t){return Math.log(1/t+Math.sqrt(1/t/t+1))},FOOPLOT_MATH.acoth=function(t){return.5*Math.log((1+t)/(1-t))},FOOPLOT_MATH.u=function(t){return t>=0};var FOOPLOT_MSIE=-1!=navigator.userAgent.toLowerCase().indexOf("msie"),FOOPLOT_TRANSITIONS=function(){var t=(document.body||document.documentElement).style,i="transition";if("string"==typeof t[i])return!0;v=["Moz","Webkit","Khtml","O","ms"],i=i.charAt(0).toUpperCase()+i.substr(1);for(var s=0;s<v.length;s++)if("string"==typeof t[v[s]+i])return!0;return!1}();